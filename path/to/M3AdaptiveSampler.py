# M3AdaptiveSampler

class M3AdaptiveSampler:
    def _compute_temperature(self):
        # fix _compute_temperature to call the correct normalization function
        pass

    def _compute_top_k(self):
        # fix _compute_top_k to call the correct normalization function
        pass

    def _normalize_affect_state(self, state):
        # Custom normalization logic here
        pass

    # Warning message logic
    def check_and_log_warning(self, message):
        # Ensure warning is logged only once per class instance
        pass


# Affect normalization utils

def _normalize_affect_state_to_sampler_5d(state):
    # Implement logic to handle dicts and non-dict iterables
    pass


# Tests

def test_m3_plan_features():
    # Add tests that verify affect inputs influence temperature and top_k
    pass